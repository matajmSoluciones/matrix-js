!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Matrix=n()}(this,function(){"use strict";var o={isMultiply:function(t,n){return"number"==typeof n||t.width==n.height&&n.dimension==t.dimension},inmultiply:function(t,n){if("number"==typeof n){for(var e={width:t.width,height:t.height,dimension:t.dimension,data:new t.instance(t.length)},i=0,r=t.length;i<r;i++)e.data[i]=t.data[i]*n;return e}return o.__inmultiplyMatrix(t,n)},__inmultiplyMatrix:function(t,n){for(var e={width:n.width,height:t.height,dimension:t.dimension,data:new t.instance(n.width*t.height*t.dimension)},i=0,r=0,o=0,a=e.data.length;i<a;i+=e.dimension,r++){r>=e.width&&(r=0,o++);for(var h=0;h<t.width;h++){var s=t.get(h,o),u=n.get(r,h);if(1!=e.dimension)for(var d=0;d<e.dimension;d++)e.data[i+d]+=s[d]*u[d];else e.data[i]+=u*s}}return e},sum:function(t,n,e){return"number"==typeof n?o.__sumConstant(t,n,e):o.__sumMatrix(t,n,e)},__sumConstant:function(t,a,n){return n&&(a=-a),t.map(function(t,n,e,i){if("number"==typeof t)return t+a;for(var r=0,o=t.length;r<o;r++)t[r]+=a;return t})},__sumMatrix:function(t,h,s){return t.map(function(t,n,e,i){var r=h.get(n,e);if("number"==typeof t&&"number"==typeof r)return s&&(r=-r),t+r;for(var o=0,a=r.length;o<a;o++)s&&(r[o]=-r[o]),t[o]+=r[o];return t})}},a=o;function l(t,n,e,i,r){var o={};if(!arguments.length)throw new Error("Es requerido un argumento");if(1==arguments.length){if("object"!=typeof t)throw new Error("config debe ser un objeto.");o=t}if(2==arguments.length&&((o=n).data=t),2<arguments.length){if(r&&"object"!=typeof r)throw new Error("config debe ser un objeto.");r&&(o=r),n&&(o.width=n),e&&(o.height=e),o.data=t}if(!o.width)throw new Error("Es necesario el ancho de la matriz.");if(!o.height)throw new Error("Es necesario el alto de la matriz.");var a={width:{value:o.width,writable:!1,enumerable:!0},height:{value:o.height,writable:!1,enumerable:!0},dimension:{value:1,writable:!1,enumerable:!0},__MAX_LIMIT_WIDTH:{value:0,writable:!1,enumerable:!0},__MAX_LIMIT_HEIGHT:{value:0,writable:!1,enumerable:!0},length:{value:0,writable:!1,enumerable:!0},size:{value:0,writable:!1,enumerable:!0}};if(o.dimension&&(a.dimension.value=o.dimension),a.__MAX_LIMIT_WIDTH.value=o.width*a.dimension.value,a.__MAX_LIMIT_HEIGHT.value=o.height*a.dimension.value,a.length.value=a.__MAX_LIMIT_WIDTH.value*o.height,a.size.value=o.width*o.height,o.type){if(o.type=o.type.toLowerCase(),!(o.type in l.typeArray))throw new Error("El tipo de objeto no es valido...");a.instance={value:l.typeArray[o.type],writable:!0,enumerable:!0}}if("number"!=typeof a.width.value)throw new Error("El ancho no es un numero");if("number"!=typeof a.height.value)throw new Error("El alto no es un numero");if("number"!=typeof a.dimension.value)throw new Error("La dimension no es un numero");Object.defineProperties(this,a),o.data?this.data=o.data:this.data=new this.instance(this.length)}function n(t,n,e){var i={type:"float32"};if(!arguments.length||3<arguments.length)throw new Error("El numero de argumentos es invalido...");return 1==arguments.length&&(i.width=i.height=t,i.dimension=1),2==arguments.length&&(i.width=t,i.height=n,i.dimension=1),3==arguments.length&&(i.width=t,i.height=n,i.dimension=e),new l(i)}return l.random=function(t,n,e){e=e||1,n=n||t;for(var i=new Float32Array(t*n*e),r=0,o=i.length;r<o;r++)i[r]=Math.random();return l.new({width:t,height:n,dimension:e,instance:"float32",data:i})},l.PI=function(t,n,e){e=e||1,n=n||t;for(var i=new Float32Array(t*n*e),r=0,o=i.length;r<o;r++)i[r]=Math.PI;return l.new({width:t,height:n,dimension:e,instance:"float32",data:i})},l.zeros=function(t,n,e){return l.new({width:t,height:n=n||t,dimension:e,instance:"int8"})},l.ones=function(t,n,e){e=e||1,n=n||t;for(var i=new Int8Array(t*n*e),r=0,o=i.length;r<o;r++)i[r]=1;return l.new({width:t,height:n,dimension:e,instance:"int8",data:i})},l.eyes=function(t,n){var e,r,i={instance:"int8",data:e};if(!arguments.length||2<arguments.length)throw new Error("El numero de argumentos es invalido...");return 1==arguments.length&&(i.width=i.height=t,i.dimension=1),2==arguments.length&&(i.width=i.height=t,i.dimension=n||1),e=new Int8Array(i.width*i.height*i.dimension),(r=l.new(i)).forEach(function(t,n,e){var i;i=1==r.dimension?n==e?1:0:t.map(function(t){return n==e?1:0}),r.set(n,e,i)}),r},l.prototype.get=function(t,n){var e=this.getIndex(t,n);return 1==this.dimension?this.data[e]:this.data.slice(e,e+this.dimension)},l.prototype.set=function(t,n,e){var i,r,o=this.getIndex(t,n);if(1!=this.dimension){if(null==e||null==e||null==e.length)throw new Error("Debe ser un array el retorno.");if(e.length!=this.dimension)throw new Error("Es necesario un indice de "+this.dimension+" dimensiones");if(i=e.length,(r=this.length)<i||r<o+i)throw new Error("El reemplazo es incorrecto!. Repare los indices");for(var a=0;a<i;a++)this.data[o+a]=e[a]}else this.data[o]=e},l.prototype.getIndex=function(t,n){var e=(t+n*this.width)*this.dimension;return Math.round(e)},l.prototype.getField=function(t,n){return console.warn("El metodo getField será descontinuado para la proxima version."),this.get(t,n)},l.prototype.setField=function(t,n,e){return console.warn("El metodo setField será descontinuado para la proxima version."),this.set(t,n,e)},l.prototype.forEach=function(t){if(!(t instanceof Function))throw new Error("callback debe ser una funcion.");for(var n=0,e=0,i=0;n<this.size;n++,e++){e>=this.width&&(e=0,i++),t(this.get(e,i),e,i,n)}},l.prototype.map=function(o){if(!(o instanceof Function))throw new Error("callback debe ser una funcion.");var a=this.clone();return this.forEach(function(t,n,e,i){var r=o(t,n,e,i);a.set(n,e,r)}),a},l.prototype.toString=function(){var i="";return this.forEach(function(t,n,e){1==this.dimension?i+=t+" ":i+=t.toString()+" ",n==this.width-1&&(i+="\n")}),i},l.prototype.isNumber=function(){for(var t=this.data,n=0,e=t.length;n<e;n++)if(isNaN(t[n]))return!1;return!0},l.prototype.isNotNumber=function(){return!this.isNumber()},l.prototype.isEqual=function(t){if(!(t instanceof l))throw new Error("El parametro no es un objetos matrix de comparacion...");for(var n=this.data,e=0,i=n.length;e<i;e++)if(n[e]!==t.data[e])return!1;return!0},l.prototype.isNotEqual=function(t){return!this.isEqual(t)},l.prototype.isNull=function(){return this.data.every(function(t,n){return!t})},l.prototype.isNotNull=function(){return!this.isNull()},l.prototype.isOverTriangle=function(){var o=!0,a=this;return this.forEach(function(t,n,e){if(1==a.dimension)o=o&&(e<n&&0===t||n<=e&&0!==t);else for(var i=0,r=t.length;i<r;i++)o=o&&(e<n&&0===t[i]||n<=e&&0!==t[i])}),o},l.prototype.isUnderTriangle=function(){var o=!0,a=this;return a.forEach(function(t,n,e){if(1==a.dimension)o=o&&(n<e&&0===t||e<=n&&0!==t);else for(var i=0,r=t.length;i<r;i++)o=o&&(n<e&&0===t[i]||e<=n&&0!==t[i])}),o},l.prototype.isSimetry=function(){var a=!0,h=this;return this.width==this.height&&(this.forEach(function(t,n,e){var i=h.get(e,n);if(1==h.dimension)a=a&&t===i;else for(var r=0,o=t.length;r<o;r++)a=a&&t[r]===i[r]}),a)},l.prototype.isAsimetry=function(){var a=!0,h=this;return h.width==h.height&&(h.forEach(function(t,n,e){var i=h.get(e,n);if(1==h.dimension)a=a&&t===-i;else for(var r=0,o=t.length;r<o;r++)a=a&&t[r]===-i[r]}),a)},l.prototype.isNotSimetry=function(){return!this.isSimetry()},l.prototype.sqrt=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.sqrt(t):t.map(function(t){return Math.sqrt(t)})})},l.prototype.cbrt=function(){var t=self.clone();return t.map(function(t){return 1==self.dimension?Math.cbrt(t):t.map(function(t){return Math.cbrt(t)})}),t},l.prototype.log=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.log(t):t.map(function(t){return Math.log(t)})})},l.prototype.exp=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.exp(t):t.map(function(t){return Math.exp(t)})})},l.prototype.abs=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.abs(t):t.map(function(t){return Math.abs(t)})})},l.prototype.atan=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.atan(t):t.map(function(t){return Math.atan(t)})})},l.prototype.cos=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.cos(t):t.map(function(t){return Math.cos(t)})})},l.prototype.sin=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.sin(t):t.map(function(t){return Math.sin(t)})})},l.prototype.round=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.round(t):t.map(function(t){return Math.round(t)})})},l.prototype.ceil=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.ceil(t):t.map(function(t){return Math.ceil(t)})})},l.prototype.floor=function(){var n=this;return this.map(function(t){return 1==n.dimension?Math.floor(t):t.map(function(t){return Math.floor(t)})})},l.prototype.pow=function(n){if("number"!=typeof n)throw new Error("n debe ser un numero");var e=this;return this.map(function(t){return 1==e.dimension?Math.pow(t,n):t.map(function(t){return Math.pow(t,n)})})},l.new=function(t){return new l(t)},l.prototype.toObject=function(){return{width:this.width,height:this.height,dimension:this.dimension,instance:this.instance,data:this.data.slice()}},l.prototype.clone=function(){var t=this.toObject();return l.new(t)},l.prototype.max=function(){return Math.max.apply(null,this.data)},l.prototype.min=function(){return Math.min.apply(null,this.data)},l.prototype.transposed=function(){var i=this;return this.map(function(t,n,e){return i.get(e,n)})},l.prototype.sum=function(){var t=arguments,n=this;if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,i=t.length;e<i;e++){var r=t[e];if(!(r instanceof l)&&"number"!=typeof r)throw new Error("Debe pasar un objeto Matrix o un escalar");if("number"!=typeof r&&(r.width!=n.width||r.height!=n.height||r.dimension!=n.dimension))throw new Error("Las matrices no son identicas en tamaño...");n=a.sum(n,r,!1)}return n},l.prototype.subtract=function(){var t=arguments,n=this.clone();if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,i=t.length;e<i;e++){var r=t[e];if(!(r instanceof l)&&"number"!=typeof r)throw new Error("Debe pasar un objeto Matrix o un escalar");if("number"!=typeof r&&(r.width!=n.width||r.height!=n.height||r.dimension!=n.dimension))throw new Error("Las matrices no son identicas en tamaño...");n=a.sum(n,r,!0)}return n},l.prototype.getRow=function(t){if("number"!=typeof t||!t||t>=this.height)throw new Error("No es valido el numero de fila");var n=this.getIndex(0,t),e=(this.getIndex(this.width-1,t),this.data.slice(n,n+this.__MAX_LIMIT_WIDTH));return new l({width:this.width,height:1,dimension:this.dimension,data:e})},l.prototype.getCol=function(t){if("number"!=typeof t||!t||t>=this.width)throw new Error("No es valido el numero de columna");for(var n=new this.instance(this.__MAX_LIMIT_HEIGHT),e=0,i=0;e<this.height;e++,i+=this.dimension){var r=this.getIndex(t,e);if(1==this.dimension)n[i]=this.data[r];else for(var o=0;o<this.dimension;o++)n[i+o]=this.data[r+o]}return new l({width:1,height:this.height,dimension:this.dimension,data:n})},l.prototype.slice=function(t,n,e,i){if("number"!=typeof n||!n||n>=this.height)throw new Error("No es valido el numero de fila");if("number"!=typeof t||!t||t>=this.width)throw new Error("No es valido el numero de columna");var r=t+(e-1),o=n+(i-1);if("number"!=typeof o||!o||o>=this.height)throw new Error("No es valido el alto");if("number"!=typeof r||!r||r>=this.width)throw new Error("No es valido el ancho");for(var a=new this.instance(e*i*this.dimension),h=0,s=n;s<=o;s++)for(var u=t;u<=r;u++){var d=this.getIndex(u,s);if(1==this.dimension)a[h]=this.data[d];else for(var f=0;f<this.dimension;f++)a[h+f]=this.data[d+f];h+=this.dimension}return new l({width:e,height:i,dimension:this.dimension,data:a})},l.prototype.inmultiply=function(){var t=arguments,n=this;if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,i=t.length;e<i;e++){var r=t[e];if(!(r instanceof l)&&"number"!=typeof r)throw new Error("Debe pasar un objeto Matrix o un escalar");if(!a.isMultiply(n,r))throw new Error("Las matrices no son multiplicables...");n=l.new(a.inmultiply(n,r))}return n.width==n.height&&1==n.width?n.data[0]:n},l.prototype.inverse=function(){var t=this.det();return this.adj().transposed().inmultiply(1/t)},l.prototype.divide=function(){var t=arguments,n=this;if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,i=t.length;e<i;e++){var r=t[e];if(!(r instanceof l)&&"number"!=typeof r)throw new Error("Debe pasar un objeto Matrix o un escalar");if("number"!=typeof r)try{n=n.inmultiply(r.inverse())}catch(t){n=r.inmultiply(n.inverse())}else n=n.inmultiply(1/r)}return n},l.prototype.not=function(){return this.inmultiply(-1)},l.prototype.isSingular=function(){return this.width==this.height},l.prototype.removeRow=function(i){var t=n(this.width,this.height-1,this.dimension);return t.map(function(t,n,e){return i<=e?this.get(n,e+1):this.get(n,e)}),t},l.prototype.removeCol=function(i){var t=n(this.width-1,this.height,this.dimension);return t.map(function(t,n,e){return i<=n?this.get(n+1,e):this.get(n,e)}),t},l.prototype.remove=function(t,n){for(var e=l.new({width:this.width-1,height:this.height-1,dimension:this.dimension}),i=0;i<e.width;i++)for(var r=0;r<e.height;r++){var o=0,a=0;n<=r&&(a=1),t<=i&&(o=1);var h=this.get(i+o,r+a);e.set(i,r,h)}return e},l.prototype.adj=function(){if(!this.isSingular())throw new Error("Debe ser una matriz cuadrada");var o=l.new({width:this.width,height:this.height,dimension:1}),a=this,h=0;return this.__adj__||(a.forEach(function(t,n,e){var i=a.remove(n,e),r=Math.pow(-1,n+e+2)*i.det();o.data[h++]=r}),this.__adj__=o),this.__adj__},l.prototype.det=function(){if(this.__determinant__)return this.__determinant__;if(1==this.width)return this.__determinant__=this.data[0],this.__determinant__;if(this.width==this.height&&2==this.width)return this.__determinant__=function(i){var r=1,o=1;if(!i.isSingular())throw new Error("La matriz no es cuadrada");return i.forEach(function(t,n,e){n==e&&(1==i.dimension?r*=t:r*=sumRow(t)),n==i.width-1-e&&(1==i.dimension?o*=t:o*=sumRow(t))}),r-o}(this),this.__determinant__;for(var t=0,n=this.adj(),e=0;e<this.width;e++)t+=this.data[e]*n.data[e];return this.__determinant__=t},l.prototype.promd=function(){for(var t=0,n=0,e=this.data.length;n<e;n++)t+=this.data[n];return t},Object.defineProperty(l.prototype,"instance",{value:Float32Array,writable:!0,enumerable:!0}),Object.defineProperty(l.prototype,"__data__",{value:null,writable:!0,enumerable:!1}),Object.defineProperty(l.prototype,"data",{enumerable:!0,configurable:!0,get:function(){return this.__data__},set:function(t){if(!l.isValidArray(t))throw new Error("El parametro data no es un objeto valido...");if(t.length!=this.length)throw new Error("No coinciden el numero de elementos de la matriz...");t instanceof this.instance?this.__data__=t:this.__data__=this.instance.from(t)}}),Object.defineProperty(l,"typeArray",{value:{int8:Int8Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint8_clamped:Uint8ClampedArray,int16:Int16Array,int32:Int32Array,float32:Float32Array,float64:Float64Array,buffer:ArrayBuffer},writable:!1,enumerable:!0}),l.isValidArray=function(t){var n=!1;if(Array.isArray(t))return!0;for(var e in l.typeArray)n=n||t instanceof l.typeArray[e];return n},l});
