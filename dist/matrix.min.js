!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Matrix=n()}(this,function(){"use strict";var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=function(t,n,e){"use asm";var o=t.Math.floor;function r(t,n,e,r){t=+t;n=+n;e=+e;r=+r;var i=0.0;i=(t+n*e)*r;return~~o(i)}return r},o={getIndex:function(t,n,e){return i(r,null,null)(n,e,t.width,t.dimension)},isMultiply:function(t,n){return"number"==typeof n||t.width==n.height&&n.dimension==t.dimension},inmultiply:function(t,n,e){return"number"==typeof e?o.__inmultiplyConstant(t,n,e):o.__inmultiplyMatrix(t,n,e)},__inmultiplyConstant:function(t,s,u){return t.map(function(t,n,e,r){var i=s.get(n,e);if("number"==typeof i)return i*u;for(var o=0,a=i.length;o<a;o++)i[o]*=u;return i}),t},__inmultiplyMatrix:function(u,h,f){return u.map(function(t,n,e){var r=0,i=0;f.getIndex(0,e),f.getIndex(f.width-1,e);1<u.dimension&&(i=new u.instance(u.dimension));for(r=0;r<h.width;r++){var o=h.get(r,e),a=f.get(n,r);if(1!=u.dimension)for(var s=0;s<u.dimension;s++)i[s]+=o[s]*a[s];else i+=a*o}return i}),u},sum:function(t,n,e){return"number"==typeof n?o.__sumConstant(t,n,e):o.__sumMatrix(t,n,e)},__sumConstant:function(t,a,n){return n&&(a=-a),t.map(function(t,n,e,r){if("number"==typeof t)return t+a;for(var i=0,o=t.length;i<o;i++)t[i]+=a;return t}),t},__sumMatrix:function(t,s,u){return t.map(function(t,n,e,r){var i=s.get(n,e);if("number"==typeof t&&"number"==typeof i)return u&&(i=-i),t+i;for(var o=0,a=i.length;o<a;o++)u&&(i[o]=-i[o]),t[o]+=i[o];return t}),t}},a=o;function p(t,n,e,r,i){var o={};if(!arguments.length)throw new Error("Es requerido un argumento");if(1==arguments.length){if("object"!=typeof t)throw new Error("config debe ser un objeto.");o=t}if(2==arguments.length&&((o=n).data=t),2<arguments.length){if(i&&"object"!=typeof i)throw new Error("config debe ser un objeto.");i&&(o=i),n&&(o.width=n),e&&(o.height=e),o.data=t}if(!o.width)throw new Error("Es necesario el ancho de la matriz.");if(!o.height)throw new Error("Es necesario el alto de la matriz.");var a={width:{value:o.width,writable:!1,enumerable:!0},height:{value:o.height,writable:!1,enumerable:!0},dimension:{value:1,writable:!1,enumerable:!0}};if(o.dimension&&(a.dimension.value=o.dimension),o.type){if(o.type=o.type.toLowerCase(),!(o.type in p.typeArray))throw new Error("El tipo de objeto no es valido...");a.instance={value:p.typeArray[o.type],writable:!0,enumerable:!0}}if("number"!=typeof a.width.value)throw new Error("El ancho no es un numero");if("number"!=typeof a.height.value)throw new Error("El alto no es un numero");if("number"!=typeof a.dimension.value)throw new Error("La dimension no es un numero");Object.defineProperties(this,a);var s=this.width*this.height*this.dimension;Object.defineProperty(this,"length",{value:s,writable:!1,enumerable:!0}),o.data?this.data=o.data:this.data=new this.instance(this.length)}function u(t,n,e){var r={type:"float32"};if(!arguments.length||3<arguments.length)throw new Error("El numero de argumentos es invalido...");return 1==arguments.length&&(r.width=r.height=t,r.dimension=1),2==arguments.length&&(r.width=t,r.height=n,r.dimension=1),3==arguments.length&&(r.width=t,r.height=n,r.dimension=e),new p(r)}return p.random=function(t,n,e){var r=u.apply(this,arguments);return r.map(function(t){return 1==r.dimension?Math.random():t.map(function(t){return Math.random()})}),r},p.PI=function(t,n,e){var r=u.apply(this,arguments);return r.map(function(t){return 1==r.dimension?Math.PI:t.map(function(t){return Math.PI})}),r},p.zeros=function(t,n,e){return u.apply(this,arguments)},p.ones=function(t,n,e){var r=u.apply(this,arguments);return r.map(function(t){return 1==r.dimension?1:t.map(function(t){return 1})}),r},p.eyes=function(t,n){var e={type:"float32"};if(!arguments.length||2<arguments.length)throw new Error("El numero de argumentos es invalido...");1==arguments.length&&(e.width=e.height=t,e.dimension=1),2==arguments.length&&(e.width=e.height=t,e.dimension=n);var r=new p(e);return r.map(function(t,n,e){return 1==r.dimension?n==e?1:0:t.map(function(t){return n==e?1:0})}),r},p.prototype.get=function(t,n){var e=this.getIndex(t,n);return 1==this.dimension?this.data[e]:this.data.slice(e,e+this.dimension)},p.prototype.set=function(t,n,e){var r,i,o=this.getIndex(t,n);if(1!=this.dimension){if(null==e||null==e||null==e.length)throw new Error("Debe ser un array el retorno.");if(e.length!=this.dimension)throw new Error("Es necesario un indice de "+this.dimension+" dimensiones");if(r=e.length,(i=this.length)<r||i<o+r)throw new Error("El reemplazo es incorrecto!. Repare los indices");for(var a=0;a<r;a++)this.data[o+a]=e[a]}else this.data[o]=e},p.prototype.getIndex=function(t,n){return a.getIndex(this,t,n)},p.prototype.getField=function(t,n){return console.warn("El metodo getField será descontinuado para la proxima version."),this.get(t,n)},p.prototype.setField=function(t,n,e){return console.warn("El metodo setField será descontinuado para la proxima version."),this.set(t,n,e)},p.prototype.forEach=function(t){if(!(t instanceof Function))throw new Error("callback debe ser una funcion.");for(var n=0,e=0,r=0,i=this.data.length;n<i;n+=this.dimension){e>=this.width&&(e=0,r++),t(this.get(e,r),e,r,n),e++}},p.prototype.map=function(o){if(!(o instanceof Function))throw new Error("callback debe ser una funcion.");var a=this;return this.forEach(function(t,n,e,r){var i=o(t,n,e,r);a.set(n,e,i)}),this},p.prototype.toString=function(){var r="";return this.forEach(function(t,n,e){1==this.dimension?r+=t+" ":r+=t.toString()+" ",n==this.width-1&&(r+="\n")}),r},p.prototype.isNumber=function(){return this.data.every(function(t){return!isNaN(t)})},p.prototype.isNotNumber=function(){return!this.isNumber()},p.prototype.isEqual=function(e){if(!(e instanceof p))throw new Error("El parametro no es un objetos matrix de comparacion...");return this.data.every(function(t,n){return t===e.data[n]})},p.prototype.isNotEqual=function(t){return!this.isEqual(t)},p.prototype.isNull=function(){return this.data.every(function(t,n){return!t})},p.prototype.isNotNull=function(){return!this.isNull()},p.prototype.isOverTriangle=function(){var o=!0,a=this;return this.forEach(function(t,n,e){if(1==a.dimension)o=o&&(e<n&&0===t||n<=e&&0!==t);else for(var r=0,i=t.length;r<i;r++)o=o&&(e<n&&0===t[r]||n<=e&&0!==t[r])}),o},p.prototype.isUnderTriangle=function(){var o=!0,a=this;return a.forEach(function(t,n,e){if(1==a.dimension)o=o&&(n<e&&0===t||e<=n&&0!==t);else for(var r=0,i=t.length;r<i;r++)o=o&&(n<e&&0===t[r]||e<=n&&0!==t[r])}),o},p.prototype.isSimetry=function(){var a=!0,s=this;return this.width==this.height&&(this.forEach(function(t,n,e){var r=s.get(e,n);if(1==s.dimension)a=a&&t===r;else for(var i=0,o=t.length;i<o;i++)a=a&&t[i]===r[i]}),a)},p.prototype.isAsimetry=function(){var a=!0,s=this;return s.width==s.height&&(s.forEach(function(t,n,e){var r=s.get(e,n);if(1==s.dimension)a=a&&t===-r;else for(var i=0,o=t.length;i<o;i++)a=a&&t[i]===-r[i]}),a)},p.prototype.isNotSimetry=function(){return!this.isSimetry()},p.prototype.sqrt=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.sqrt(t):t.map(function(t){return Math.sqrt(t)})}),n},p.prototype.cbrt=function(){var n=self.clone();return n.map(function(t){return 1==n.dimension?Math.cbrt(t):t.map(function(t){return Math.cbrt(t)})}),n},p.prototype.log=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.log(t):t.map(function(t){return Math.log(t)})}),n},p.prototype.exp=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.exp(t):t.map(function(t){return Math.exp(t)})}),n},p.prototype.abs=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.abs(t):t.map(function(t){return Math.abs(t)})}),n},p.prototype.atan=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.atan(t):t.map(function(t){return Math.atan(t)})}),n},p.prototype.cos=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.cos(t):t.map(function(t){return Math.cos(t)})}),n},p.prototype.sin=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.sin(t):t.map(function(t){return Math.sin(t)})}),n},p.prototype.round=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.round(t):t.map(function(t){return Math.round(t)})}),n},p.prototype.ceil=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.ceil(t):t.map(function(t){return Math.ceil(t)})}),n},p.prototype.floor=function(){var n=this.clone();return n.map(function(t){return 1==n.dimension?Math.floor(t):t.map(function(t){return Math.floor(t)})}),n},p.prototype.pow=function(n){if("number"!=typeof n)throw new Error("n debe ser un numero");var e=this.clone();return e.map(function(t){return 1==e.dimension?Math.pow(t,n):t.map(function(t){return Math.pow(t,n)})}),e},p.prototype.clone=function(){var t=function t(n){var e={};for(var r in n){var i=n[r],o=Object.getOwnPropertyDescriptor(n,r);o?Object.defineProperty(e,r,o):p.isValidArray(i)?e[r]=i.slice():e[r]="object"!=typeof i?n[r]:t(n[r])}return e}(this);return t.data=this.data.slice(),t},p.prototype.size=function(){return[this.width,this.height,this.dimension]},p.prototype.max=function(){return Math.max.apply(null,this.data)},p.prototype.min=function(){return Math.min.apply(null,this.data)},p.prototype.transposed=function(){var t=u(this.height,this.width,this.dimension),r=this;return t.map(function(t,n,e){return r.get(e,n)}),t},p.prototype.sum=function(){var t=arguments,n=this.clone();if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,r=t.length;e<r;e++){var i=t[e];if(!(i instanceof p)&&"number"!=typeof i)throw new Error("Debe pasar un objeto Matrix o un escalar");if("number"!=typeof i&&(i.width!=n.width||i.height!=n.height||i.dimension!=n.dimension))throw new Error("Las matrices no son identicas en tamaño...");n=a.sum(n,i,!1)}return n},p.prototype.subtract=function(){var t=arguments,n=this.clone();if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,r=t.length;e<r;e++){var i=t[e];if(!(i instanceof p)&&"number"!=typeof i)throw new Error("Debe pasar un objeto Matrix o un escalar");if("number"!=typeof i&&(i.width!=n.width||i.height!=n.height||i.dimension!=n.dimension))throw new Error("Las matrices no son identicas en tamaño...");n=a.sum(n,i,!0)}return n},p.prototype.getRow=function(t){if("number"!=typeof t||!t||t>=this.height)throw new Error("No es valido el numero de fila");var n=this.getIndex(0,t),e=(this.getIndex(this.width-1,t),this.data.slice(n,n+this.width*this.dimension));return new p({width:this.width,height:1,dimension:this.dimension,data:e})},p.prototype.getCol=function(t){if("number"!=typeof t||!t||t>=this.width)throw new Error("No es valido el numero de columna");for(var n=new this.instance(this.height*this.dimension),e=0,r=0;e<this.height;e++,r+=this.dimension){var i=this.getIndex(t,e);if(1==this.dimension)n[r]=this.data[i];else for(var o=0;o<this.dimension;o++)n[r+o]=this.data[i+o]}return new p({width:1,height:this.height,dimension:this.dimension,data:n})},p.prototype.slice=function(t,n,e,r){if("number"!=typeof n||!n||n>=this.height)throw new Error("No es valido el numero de fila");if("number"!=typeof t||!t||t>=this.width)throw new Error("No es valido el numero de columna");var i=t+(e-1),o=n+(r-1);if("number"!=typeof o||!o||o>=this.height)throw new Error("No es valido el alto");if("number"!=typeof i||!i||i>=this.width)throw new Error("No es valido el ancho");for(var a=new this.instance(e*r*this.dimension),s=0,u=n;u<=o;u++)for(var h=t;h<=i;h++){var f=this.getIndex(h,u);if(1==this.dimension)a[s]=this.data[f];else for(var d=0;d<this.dimension;d++)a[s+d]=this.data[f+d];s+=this.dimension}return new p({width:e,height:r,dimension:this.dimension,data:a})},p.prototype.inmultiply=function(){var t=arguments,n=this;if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,r=t.length;e<r;e++){var i=t[e];if(!(i instanceof p)&&"number"!=typeof i)throw new Error("Debe pasar un objeto Matrix o un escalar");if(!a.isMultiply(n,i))throw new Error("Las matrices no son multiplicables...");var o=u("number"==typeof i?n.width:i.width,n.height,n.dimension);n=a.inmultiply(o,n,i)}return n.width==n.height&&1==n.width?n.data[0]:n},p.prototype.inverse=function(){var t=this.det();return this.adj().transposed().inmultiply(1/t)},p.prototype.divide=function(){var t=arguments,n=this;if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,r=t.length;e<r;e++){var i=t[e];if(!(i instanceof p)&&"number"!=typeof i)throw new Error("Debe pasar un objeto Matrix o un escalar");if("number"!=typeof i)try{n=n.inmultiply(i.inverse())}catch(t){n=i.inmultiply(n.inverse())}else n=n.inmultiply(1/i)}return n},p.prototype.not=function(){return this.inmultiply(-1)},p.prototype.isSingular=function(){return this.width==this.height},p.prototype.removeRow=function(r){var t=u(this.width,this.height-1,this.dimension);return t.map(function(t,n,e){return r<=e?this.get(n,e+1):this.get(n,e)}),t},p.prototype.removeCol=function(r){var t=u(this.width-1,this.height,this.dimension);return t.map(function(t,n,e){return r<=n?this.get(n+1,e):this.get(n,e)}),t},p.prototype.remove=function(o,a){var t=u(this.width-1,this.height-1,this.dimension),s=this;return t.map(function(t,n,e){var r=0,i=0;return a<=e&&(i=1),o<=n&&(r=1),s.get(n+r,e+i)}),t},p.prototype.adj=function(){if(!this.isSingular())throw new Error("Debe ser una matriz cuadrada");var o=u(this.width,this.height,1),a=this,s=0;return this.__adj__||(a.forEach(function(t,n,e){var r=a.remove(n,e),i=Math.pow(-1,n+e+2)*r.det();o.data[s++]=i}),this.__adj__=o),this.__adj__},p.prototype.det=function(){if(this.__determinant__)return this.__determinant__;if(1==this.width)return this.__determinant__=this.data[0],this.__determinant__;if(this.width==this.height&&2==this.width)return this.__determinant__=function(r){var i=1,o=1;if(!r.isSingular())throw new Error("La matriz no es cuadrada");return r.forEach(function(t,n,e){n==e&&(1==r.dimension?i*=t:i*=sumRow(t)),n==r.width-1-e&&(1==r.dimension?o*=t:o*=sumRow(t))}),i-o}(this),this.__determinant__;for(var t=0,n=this.adj(),e=0;e<this.width;e++)t+=this.data[e]*n.data[e];return this.__determinant__=t},p.prototype.promd=function(){for(var t=0,n=0,e=this.data.length;n<e;n++)t+=this.data[n];return t},Object.defineProperty(p.prototype,"instance",{value:Float32Array,writable:!0,enumerable:!0}),Object.defineProperty(p.prototype,"__data__",{value:null,writable:!0,enumerable:!1}),Object.defineProperty(p.prototype,"data",{enumerable:!0,configurable:!0,get:function(){return this.__data__},set:function(t){if(!p.isValidArray(t))throw new Error("El parametro data no es un objeto valido...");if(t.length!=this.length)throw new Error("No coinciden el numero de elementos de la matriz...");t instanceof this.instance?this.__data__=t:this.__data__=this.instance.from(t)}}),Object.defineProperty(p,"typeArray",{value:{int8:Int8Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint8_clamped:Uint8ClampedArray,int16:Int16Array,int32:Int32Array,float32:Float32Array,float64:Float64Array,buffer:ArrayBuffer},writable:!1,enumerable:!0}),p.isValidArray=function(t){var n=!1;if(Array.isArray(t))return!0;for(var e in p.typeArray)n=n||t instanceof p.typeArray[e];return n},p});
