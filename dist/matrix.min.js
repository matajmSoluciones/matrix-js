!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.Matrix=i()}(this,function(){"use strict";var h={isMultiply:function(t,i){return"number"==typeof i||t.width==i.height&&i.dimension==t.dimension},inmultiply:function(t,i){if("number"!=typeof i)return h.__inmultiplyMatrix(t,i);for(var e={width:t.width,height:t.height,dimension:t.dimension,data:new t.instance(t.length)},n=0,r=t.length;n<r;n++)e.data[n]=t.data[n]*i;return e},__inmultiplyMatrix:function(t,i){for(var e={width:i.width,height:t.height,dimension:t.dimension,data:new t.instance(i.width*t.height*t.dimension)},n=0,r=0,h=0,a=e.data.length;n<a;n+=e.dimension,r++){r>=e.width&&(r=0,h++);for(var o=0;o<t.width;o++){var s=t.get(o,h),d=i.get(r,o);if(1==e.dimension)e.data[n]+=d*s;else for(var u=0;u<e.dimension;u++)e.data[n+u]+=s[u]*d[u]}}return e},sum:function(t,i,e){return"number"==typeof i?h.__sumConstant(t,i,e):h.__sumMatrix(t,i,e)},__sumConstant:function(t,a,i){return i&&(a=-a),t.map(function(t,i,e,n){if("number"==typeof t)return t+a;for(var r=0,h=t.length;r<h;r++)t[r]+=a;return t})},__sumMatrix:function(t,o,s){return t.map(function(t,i,e,n){var r=o.get(i,e);if("number"==typeof t&&"number"==typeof r)return t+(r=s?-r:r);for(var h=0,a=r.length;h<a;h++)s&&(r[h]=-r[h]),t[h]+=r[h];return t})},determinant2:function(n){var r=1,h=1;if(n.isSingular())return n.forEach(function(t,i,e){i==e&&(1==n.dimension?r*=t:r*=sumRow(t)),i==n.width-1-e&&(1==n.dimension?h*=t:h*=sumRow(t))}),r-h;throw new Error("La matriz no es cuadrada")}},a=h,t=(function(t){class l{constructor(t,i,e,n,r){if(!arguments.length)throw new Error("Es requerido un argumento");if(1==arguments.length){if("object"!=typeof t)throw new Error("config debe ser un objeto.");r=t}if(2==arguments.length&&((r=i).data=t),2<arguments.length){if((r=r||{})&&"object"!=typeof r)throw new Error("config debe ser un objeto.");i&&(r.width=i),e&&(r.height=e),r.data=t}if(!r.width)throw new Error("Es necesario el ancho de la matriz.");if(!r.height)throw new Error("Es necesario el alto de la matriz.");if(this.dimension=1,r.dimension&&(this.dimension=r.dimension),r.type&&(r.type=r.type.toLowerCase(),!(r.type in l.typeArray())))throw new Error("El tipo de objeto no es valido...");if(this.width=Number(r.width),this.height=Number(r.height),this.instance=l.typeArray()[r.type||"float32"],isNaN(this.width))throw new Error("El ancho no es un numero");if(isNaN(this.height))throw new Error("El alto no es un numero");if(isNaN(this.dimension))throw new Error("La dimension no es un numero");r.data?this.data=r.data:this.data=new this.instance(this.length)}get data(){return this.__data__}set data(t){if(!l.isValidArray(t))throw new Error("El parametro data no es un objeto valido...");if(t.length!=this.length)throw new Error("No coinciden el numero de elementos de la matriz...");t instanceof this.instance?this.__data__=t:this.__data__=this.instance.from(t)}get width(){return this.__width}set width(t){this.__width=t,this.__update_max_limit_with()}get height(){return this.__height}set height(t){this.__height=t,this.__update_max_limit_height()}getIndex(t,i){t=(t+i*this.width)*this.dimension;return Math.round(t)}get(t,i){var e=this.getIndex(t,i);if(!(t<0||t>=this.width||i<0||i>=this.height))return 1==this.dimension?this.data[e]:this.data.slice(e,e+this.dimension)}set(t,i,e){var n,r=this.getIndex(t,i);if(1==this.dimension)this.data[r]=e;else{if(null==e||null==e.length)throw new Error("Debe ser un array el retorno.");if(e.length!=this.dimension)throw new Error("Es necesario un indice de "+this.dimension+" dimensiones");if(n=e.length,(t=this.length)<n||t<r+n)throw new Error("El reemplazo es incorrecto!. Repare los indices");for(var h=0;h<n;h++)this.data[r+h]=e[h]}}forEach(t){if(!(t instanceof Function))throw new Error("callback debe ser una funcion.");for(var i=0,e=0,n=0;i<this.size;i++,e++)e>=this.width&&(e=0,n++),t(this.get(e,n),e,n,i)}map(r){if(!(r instanceof Function))throw new Error("callback debe ser una funcion.");var h=this.clone();return this.forEach(function(t,i,e,n){t=r(t,i,e,n);h.set(i,e,t)}),h}isNumber(){for(var t=this.data,i=0,e=t.length;i<e;i++)if(isNaN(t[i]))return!1;return!0}isNotNumber(){return!this.isNumber()}isEqual(t){if(!(t instanceof l))throw new Error("El parametro no es un objetos matrix de comparacion...");for(var i=this.data,e=0,n=i.length;e<n;e++)if(i[e]!==t.data[e])return!1;return!0}isNotEqual(t){return!this.isEqual(t)}isNull(){return this.data.every(function(t){return!t})}isVoid(){return this.data.every(function(t){return null==t||"string"==typeof t&&0==t.length})}isNotNull(){return!this.isNull()}isOverTriangle(){var h=!0,a=this;return this.forEach(function(t,i,e){if(1==a.dimension)h=h&&(e<i&&0===t||i<=e&&0!==t);else for(var n=0,r=t.length;n<r;n++)h=h&&(e<i&&0===t[n]||i<=e&&0!==t[n])}),h}isUnderTriangle(){var h=!0,a=this;return a.forEach(function(t,i,e){if(1==a.dimension)h=h&&(i<e&&0===t||e<=i&&0!==t);else for(var n=0,r=t.length;n<r;n++)h=h&&(i<e&&0===t[n]||e<=i&&0!==t[n])}),h}isSimetry(){var a=!0,o=this;return this.width==this.height&&(this.forEach(function(t,i,e){var n=o.get(e,i);if(1==o.dimension)a=a&&t===n;else for(var r=0,h=t.length;r<h;r++)a=a&&t[r]===n[r]}),a)}isAsimetry(){var a=!0,o=this;return o.width==o.height&&(o.forEach(function(t,i,e){var n=o.get(e,i);if(1==o.dimension)a=a&&t===-n;else for(var r=0,h=t.length;r<h;r++)a=a&&t[r]===-n[r]}),a)}isNotSimetry(){return!this.isSimetry()}sqrt(){var i=this;return this.map(function(t){return 1==i.dimension?Math.sqrt(t):t.map(function(t){return Math.sqrt(t)})})}cbrt(){var t=self.clone();return t.map(function(t){return 1==self.dimension?Math.cbrt(t):t.map(function(t){return Math.cbrt(t)})}),t}log(){var i=this;return this.map(function(t){return 1==i.dimension?Math.log(t):t.map(function(t){return Math.log(t)})})}exp(){var i=this;return this.map(function(t){return 1==i.dimension?Math.exp(t):t.map(function(t){return Math.exp(t)})})}abs(){var i=this;return this.map(function(t){return 1==i.dimension?Math.abs(t):t.map(function(t){return Math.abs(t)})})}atan(){var i=this;return this.map(function(t){return 1==i.dimension?Math.atan(t):t.map(function(t){return Math.atan(t)})})}cos(){var i=this;return this.map(function(t){return 1==i.dimension?Math.cos(t):t.map(function(t){return Math.cos(t)})})}sin(){var i=this;return this.map(function(t){return 1==i.dimension?Math.sin(t):t.map(function(t){return Math.sin(t)})})}round(){var i=this;return this.map(function(t){return 1==i.dimension?Math.round(t):t.map(function(t){return Math.round(t)})})}ceil(){var i=this;return this.map(function(t){return 1==i.dimension?Math.ceil(t):t.map(function(t){return Math.ceil(t)})})}floor(){var i=this;return this.map(function(t){return 1==i.dimension?Math.floor(t):t.map(function(t){return Math.floor(t)})})}pow(i){if("number"!=typeof i)throw new Error("n debe ser un numero");var e=this;return this.map(function(t){return 1==e.dimension?Math.pow(t,i):t.map(function(t){return Math.pow(t,i)})})}toString(){var n="",r=this;return this.forEach(function(t,i,e){1==r.dimension?n+=t+" ":n+=t.toString()+" ",i==r.width-1&&(n+="\n")}),n}toObject(){var t,i="float32";for(t in l.typeArray())if(l.typeArray()[t]instanceof this.instance){i=t;break}return{width:this.width,height:this.height,dimension:this.dimension,type:i,data:this.data.slice()}}clone(){var t=this.toObject();return l.new(t)}max(){return Math.max.apply(null,this.data)}min(){return Math.min.apply(null,this.data)}transposed(){var n=this;return this.map(function(t,i,e){return n.get(e,i)})}sum(){var t=arguments,i=this;if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,n=t.length;e<n;e++){var r=t[e];if(!(r instanceof l)&&"number"!=typeof r)throw new Error("Debe pasar un objeto Matrix o un escalar");if("number"!=typeof r&&(r.width!=i.width||r.height!=i.height||r.dimension!=i.dimension))throw new Error("Las matrices no son identicas en tamaño...");i=a.sum(i,r,!1)}return i}subtract(){var t=arguments,i=this.clone();if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,n=t.length;e<n;e++){var r=t[e];if(!(r instanceof l)&&"number"!=typeof r)throw new Error("Debe pasar un objeto Matrix o un escalar");if("number"!=typeof r&&(r.width!=i.width||r.height!=i.height||r.dimension!=i.dimension))throw new Error("Las matrices no son identicas en tamaño...");i=a.sum(i,r,!0)}return i}getRow(t){if("number"!=typeof t||void 0===t||t>=this.height)throw new Error("No es valido el numero de fila");var i=this.getIndex(0,t),t=(this.getIndex(this.width-1,t),this.data.slice(i,i+this.__MAX_LIMIT_WIDTH));return new l({width:this.width,height:1,dimension:this.dimension,data:t})}getCol(t){if("number"!=typeof t||void 0===t||t>=this.width)throw new Error("No es valido el numero de columna");for(var i=new this.instance(this.__MAX_LIMIT_HEIGHT),e=0,n=0;e<this.height;e++,n+=this.dimension){var r=this.getIndex(t,e);if(1==this.dimension)i[n]=this.data[r];else for(var h=0;h<this.dimension;h++)i[n+h]=this.data[r+h]}return new l({width:1,height:this.height,dimension:this.dimension,data:i})}slice(t,i,e,n,r){if("number"!=typeof t||"number"!=typeof i||"number"!=typeof e||"number"!=typeof n)throw new Error("Argumentos invalidos");for(var h=t+(e-1),a=i+(n-1),o=new this.instance(e*n*this.dimension),s=new l({width:e,height:n,dimension:this.dimension,data:o}),d=0,u=i;u<=a;u++,d++)for(var m=t,f=0;m<=h;m++,f++){var w=this.get(m,u);w&&s.set(f,d,w)}return s}inmultiply(){var t=arguments,i=this;if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,n=t.length;e<n;e++){var r=t[e];if(!(r instanceof l)&&"number"!=typeof r)throw new Error("Debe pasar un objeto Matrix o un escalar");if(!a.isMultiply(i,r))throw new Error("Las matrices no son multiplicables...");i=l.new(a.inmultiply(i,r))}return i.width==i.height&&1==i.width?i.data[0]:i}inverse(){var t=this.det();return this.adj().transposed().inmultiply(1/t)}divide(){var t=arguments,i=this;if(!t.length)throw new Error("Es necesario un objeto");for(var e=0,n=t.length;e<n;e++){var r=t[e];if(!(r instanceof l)&&"number"!=typeof r)throw new Error("Debe pasar un objeto Matrix o un escalar");if("number"==typeof r)i=i.inmultiply(1/r);else try{i=i.inmultiply(r.inverse())}catch(t){i=r.inmultiply(i.inverse())}}return i}not(){return this.inmultiply(-1)}isSingular(){return this.width==this.height}moveRow(t,i){for(var e=this.getRow(t),n=this.getRow(i),r=0;r<this.width;r++)this.set(r,t,n.get(r,0)),this.set(r,i,e.get(r,0));return this}moveCol(t,i){for(var e=this.getCol(t),n=this.getCol(i),r=0;r<this.height;r++)this.set(t,r,n.get(0,r)),this.set(i,r,e.get(0,r));return this}removeRow(n){var t=Generate(this.width,this.height-1,this.dimension);return t.map(function(t,i,e){return n<=e?this.get(i,e+1):this.get(i,e)}),t}removeCol(n){var t=Generate(this.width-1,this.height,this.dimension);return t.map(function(t,i,e){return n<=i?this.get(i+1,e):this.get(i,e)}),t}remove(t,i){for(var e=l.new({width:this.width-1,height:this.height-1,dimension:this.dimension}),n=0;n<e.width;n++)for(var r=0;r<e.height;r++){var h=0,a=i<=r?1:0,h=this.get(n+(h=t<=n?1:h),r+a);e.set(n,r,h)}return e}adj(){if(!this.isSingular())throw new Error("Debe ser una matriz cuadrada");var r=l.new({width:this.width,height:this.height,dimension:1}),h=this,a=0;return this.__adj__||(h.forEach(function(t,i,e){var n=h.remove(i,e),i=Math.pow(-1,i+e+2)*n.det();r.data[a++]=i}),this.__adj__=r,this.__adj__)}det(){if(this.__determinant__)return this.__determinant__;if(1==this.width)return this.__determinant__=this.data[0],this.__determinant__;if(this.width==this.height&&2==this.width)return this.__determinant__=a.determinant2(this),this.__determinant__;for(var t=0,i=this.adj(),e=0;e<this.width;e++)t+=this.data[e]*i.data[e];return this.__determinant__=t}promd(){for(var t=0,i=0,e=this.data.length;i<e;i++)t+=this.data[i];return t}convolution(c){var g=this,p=-Math.floor(c.width/2),_=-Math.floor(c.height/2);return this.map(function(t,i,e){var n=i+p,i=e+_,r=n+(c.width-1),h=i+(c.height-1),a=0;1<g.dimension&&(a=new g.instance(screen.dimension));for(var o=0,s=i;s<=h;s++,o++)for(var d=0,u=n;u<=r;u++,d++){var m=g.get(u,s),f=c.get(d,o);if(m)if(1==g.dimension)a+=m*f;else for(var w=0,l=a.length;w<l;w++)a+=m[w]*f[w]}return a})}__update_max_limit_with(){this.__MAX_LIMIT_WIDTH=this.width*this.dimension,this.__update_length()}__update_max_limit_height(){this.__MAX_LIMIT_HEIGHT=this.height*this.dimension,this.__update_length()}__update_length(){this.size=this.width*this.height,this.length=this.__MAX_LIMIT_WIDTH*this.height}static random(t,i,e){e=e||1,i=i||t;for(var n=new Float32Array(t*i*e),r=0,h=n.length;r<h;r++)n[r]=Math.random();return l.new({width:t,height:i,dimension:e,type:"float32",data:n})}static PI(t,i,e){e=e||1,i=i||t;for(var n=new Float32Array(t*i*e),r=0,h=n.length;r<h;r++)n[r]=Math.PI;return l.new({width:t,height:i,dimension:e,type:"float32",data:n})}static zeros(t,i,e){return i=i||t,l.new({width:t,height:i,dimension:e,type:"int8"})}static ones(t,i,e){e=e||1,i=i||t;for(var n=new Int8Array(t*i*e),r=0,h=n.length;r<h;r++)n[r]=1;return l.new({width:t,height:i,dimension:e,type:"int8",data:n})}static eyes(t,i){var n,e={type:"int8",data:void 0};if(!arguments.length||2<arguments.length)throw new Error("El numero de argumentos es invalido...");return 1==arguments.length&&(e.width=e.height=t,e.dimension=1),2==arguments.length&&(e.width=e.height=t,e.dimension=i||1),new Int8Array(e.width*e.height*e.dimension),(n=l.new(e)).forEach(function(t,i,e){t=1==n.dimension?i==e?1:0:t.map(function(t){return i==e?1:0});n.set(i,e,t)}),n}static new(t){return new l(t)}static isValidArray(t){var i,e=!1;if(Array.isArray(t))return!0;for(i in l.typeArray())e=e||t instanceof l.typeArray()[i];return e}static typeArray(){return{int8:Int8Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint8_clamped:Uint8ClampedArray,int16:Int16Array,int32:Int32Array,float32:Float32Array,float64:Float64Array,buffer:ArrayBuffer}}}t.exports=l,t.exports.BLUR=l.new({width:5,height:5,dimension:1,data:[.003,.0133,.0219,.0133,.003,.0133,.0596,.0983,.0596,.0133,.0219,.0983,.1621,.0983,.0219,.0133,.0596,.0983,.0596,.0133,.003,.0133,.0219,.0133,.003]}),t.exports.GAUSSIAN=l.new({width:5,height:5,dimension:1,data:[.003663003663003663,.014652014652014652,.02564102564102564,.014652014652014652,.003663003663003663,.014652014652014652,.05860805860805861,.09523809523809523,.05860805860805861,.014652014652014652,.02564102564102564,.09523809523809523,.15018315018315018,.09523809523809523,.02564102564102564,.014652014652014652,.05860805860805861,.09523809523809523,.05860805860805861,.014652014652014652,.003663003663003663,.014652014652014652,.02564102564102564,.014652014652014652,.003663003663003663]}),t.exports.MEDIA=l.new({width:3,height:3,data:[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111]}),t.exports.PREWITTV=l.new({width:3,height:3,data:[-1,-1,-1,0,0,0,1,1,1]}),t.exports.PREWITTH=l.new({width:3,height:3,data:[-1,0,-1,-1,0,1,-1,0,1]}),t.exports.SOBELV=l.new({width:3,height:3,data:[-1,-2,-1,0,0,0,1,2,1]}),t.exports.SOBELH=l.new({width:3,height:3,data:[-1,0,1,-2,0,2,-1,0,1]}),t.exports.LAPLACIANO=l.new({width:3,height:3,data:[0,-1,0,-1,4,-1,0,-1,0]}),t.exports.LAGAUSSIANO=l.new({width:5,height:5,data:[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,16,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0]}),t.exports.SHARPEN=l.new({width:5,height:5,data:[0,0,0,0,0,0,0,-1,0,0,0,-1,5,-1,0,0,0,-1,0,0,0,0,0,0,0]}),t.exports.EMBOSS=l.new({width:3,height:3,data:[-2,-1,0,-1,1,1,0,1,2]})}(t={exports:{}}),t.exports);t.BLUR,t.GAUSSIAN,t.MEDIA,t.PREWITTV,t.PREWITTH,t.SOBELV,t.SOBELH,t.LAPLACIANO,t.LAGAUSSIANO,t.SHARPEN,t.EMBOSS;return t});
