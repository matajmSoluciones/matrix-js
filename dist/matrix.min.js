!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.Matrix=e()}(this,function(){"use strict";var l=function(l,n,e){"use asm";function m(n,e,t,i,r){n=n|0;e=e|0;t=t|0;i=i|0;r=r|0;return~~l.Math.floor(+(n+e*t))*r}function t(n,e,t,i,r,o){n=o.from(n);s=s|0;u=u|0;e=e|0;t=t|0;i=i|0;var a=0,s=0,u=0,h=n.length|0;for(a=0;(a|0)<h;a=a+i|0){var c;if(i==1){c=+n[a]}else{c=o.from(n.slice(a,a+i))}if(s>=e){s=0;u++}r(c,s|0,u|0,a|0);s++}}function h(n,e,t,i){t=t|0;var r=0,o=e.length|0,a=t+e|0,s=n.length|0;if(o>=s||a>=s){throw new Error("El reemplazo es incorrecto!. Repare los indices")}for(r=0;(r|0)<o;r=r+1|0){n[t+r|0]=e[r]}return n}function i(o,n,e,a,s,u){t(o,n,e,a,function(n,e,t,i){var r=s(n,e|0,t|0,i|0);if(a==1){o[i|0]=r}else{if(r==undefined||r==null||r.length==undefined){throw new Error("Debe ser un array el retorno.")}if(r.length!=a){throw new Error("Es necesario un indice de "+a+" dimensiones")}o=h(o,r,i,u)}},u);return o}function r(n,i,r){var o=n.clone(),a;if(r==undefined||r==null){r=true}if(!(typeof i=="number"||i.width==o.width&&i.height==o.height&&i.dimension==o.dimension)){throw new Error("Las matrices no son identicas en tamaÃ±o...")}if(typeof i=="number"){a=i}o.map(function(n,e,t){if(typeof i==="object"){a=i.getField(e,t)}if(o.dimension==1){if(!r){return l.Math.fround(n-a)}return l.Math.fround(n+a)}return n.map(function(n,e){if(typeof a=="number"){if(!r){return l.Math.fround(n-a)}return l.Math.fround(n+a)}if(!r){return l.Math.fround(n-a[e])}return l.Math.fround(n+a[e])})});return o}function o(n,e,t){e=e|0;return n.slice(e,e+t)}function a(n,e){return typeof e=="number"||n.width==e.height&&e.dimension==n.dimension}function s(c,d,f){if(!a(d,f)){throw new Error("Las matrices no son multiplicables...")}if(typeof f==="number"){c.map(function(n,e,t){e=e|0;t=t|0;var i=d.getField(e,t);if(c.dimension==1){return l.Math.fround(i*f)}var r=0,o=i.length;for(r=0;(r|0)<o;r=r+1|0){i[r]=l.Math.fround(i[r]*f)}return i});return c}c.map(function(n,e,t){var i=0,r=c.dimension==1?0:new c.typeInstance(c.dimension),o=m(0,t,f.width,f.height,f.dimension)|0,a=m(f.width-1,t,f.width,f.height,f.dimension)|0;for(i=0;(i|0)<d.width;i=i+1|0){var s=d.getField(i,t),u=f.getField(e,i),h=0;if(c.dimension==1){r+=l.Math.fround(u*s)}else{for(h=0;(h|0)<c.dimension;h=h+1|0){r[h]+=l.Math.fround(s[h]*u[h])}}}return r});if(c.width==c.height&&c.width==1){return c.data[0]}return c}function u(n,e){n.config.data=n.data.slice();var t=new e(n.config);return t}return{getIndex:m,forEach:t,replace:h,map:i,slice:o,sum:r,clone:u,inmultiply:s}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{});function m(n,e,t,i,r){var f=this,a=null,s=null;function o(n){console.assert(n instanceof Int8Array||n instanceof Int16Array||n instanceof Int32Array||n instanceof Float32Array||n instanceof Float64Array||n instanceof Uint8ClampedArray||n instanceof ArrayBuffer||Array.isArray(n),"El parametro data no es un objeto valido..."),n instanceof f.typeInstance?f.data=n:f.data=f.typeInstance.from(n)}function u(n){console.assert(n.width,"Es necesario el ancho de la matriz."),console.assert(n.height,"Es necesario el alto de la matriz."),f.width=n.width,f.height=n.height,n.dimension&&(f.dimension=n.dimension),n.type&&function(n){switch(n.toLowerCase()){case"int8":f.typeInstance=Int8Array;break;case"uint8":f.typeInstance=Uint8Array;break;case"uint16":f.typeInstance=Uint16Array;break;case"uint32":f.typeInstance=Uint32Array;break;case"uint8_clamped":f.typeInstance=Uint8ClampedArray;break;case"int16":f.typeInstance=Int16Array;break;case"int32":f.typeInstance=Int32Array;break;case"float32":f.typeInstance=Float32Array;break;case"float64":f.typeInstance=Float64Array;break;case"buffer":f.typeInstance=ArrayBuffer;break;default:throw new Error("El tipo de objeto no es valido...")}}(n.type),f.config=n}function h(n){for(var e=0,t=0,i=n.length;t<i;t++)e+=n[t];return e}f.typeInstance=Float32Array,f.length=0,f.dimension=1,f.config={},console.assert(0<arguments.length,"Es requerido un argumento"),1==arguments.length&&(console.assert("object"==typeof n,"config debe ser un objeto."),u(n),n.data&&o(n.data)),2==arguments.length&&(u(e),o(n)),2<arguments.length&&(r||(r={}),console.assert("object"==typeof r,"config debe ser un objeto."),r.width=e,r.height=t,i&&(r.dimension=i),u(r),o(n)),f.length=f.width*f.height*f.dimension,f.data||(f.data=new f.typeInstance(f.length)),console.assert("number"==typeof f.width,"El ancho no es un numero"),console.assert("number"==typeof f.height,"El alto no es un numero"),console.assert("number"==typeof f.dimension,"La dimension no es un numero"),console.assert(f.data.length==f.length,"No coinciden el numero de elementos de la matriz..."),this.getField=function(n,e){var t=l.getIndex(n,e,f.width,f.height,f.dimension);return 1==f.dimension?f.data[t]:l.slice(f.data,t,f.dimension)},this.setField=function(n,e,t){var i=l.getIndex(n,e,f.width,f.height,f.dimension);if(1==f.dimension&&(f.data[i]=t),null==t||null==t||null==t.length)throw new Error("Debe ser un array el retorno.");if(t.length!=f.dimension)throw new Error("Es necesario un indice de "+f.dimension+" dimensiones");return l.replace(f.data,t,i,f.typeInstance)},this.forEach=function(n){console.assert(n instanceof Function,"callback debe ser una funcion."),l.forEach(f.data,f.width,f.height,f.dimension,n,f.typeInstance)},this.map=function(n){return console.assert(n instanceof Function,"callback debe ser una funcion."),l.map(f.data,f.width,f.height,f.dimension,n,f.typeInstance)},this.isNumber=function(){return f.data.every(function(n){return!isNaN(n)})},this.isNotNumber=function(){return!f.isNumber()},this.isEqual=function(t){return console.assert(t instanceof m,"El parametro no es un objetos matrix de comparacion..."),f.data.every(function(n,e){return n===t.data[e]})},this.isNotEqual=function(n){return!f.isEqual(n)},this.isNull=function(){return f.data.every(function(n,e){return!n})},this.isNotNull=function(){return!f.isNull()},this.isOverTriangle=function(){var o=!0;return f.forEach(function(n,e,t){if(1==f.dimension)o=o&&(t<e&&0===n||e<=t&&0!==n);else for(var i=0,r=n.length;i<r;i++)o=o&&(t<e&&0===n[i]||e<=t&&0!==n[i])}),o},this.isUnderTriangle=function(){var o=!0;return f.forEach(function(n,e,t){if(1==f.dimension)o=o&&(e<t&&0===n||t<=e&&0!==n);else for(var i=0,r=n.length;i<r;i++)o=o&&(e<t&&0===n[i]||t<=e&&0!==n[i])}),o},this.isSimetry=function(){var a=!0;return f.width==f.height&&(f.forEach(function(n,e,t){var i=f.getField(t,e);if(1==f.dimension)a=a&&n===i;else for(var r=0,o=n.length;r<o;r++)a=a&&n[r]===i[r]}),a)},this.isAsimetry=function(){var a=!0;return f.width==f.height&&(f.forEach(function(n,e,t){var i=f.getField(t,e);if(1==f.dimension)a=a&&n===-i;else for(var r=0,o=n.length;r<o;r++)a=a&&n[r]===-i[r]}),a)},this.isNotSimetry=function(){return!f.isSimetry()},this.sqrt=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.sqrt(n):n.map(function(n){return Math.sqrt(n)})}),e},this.cbrt=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.cbrt(n):n.map(function(n){return Math.cbrt(n)})}),e},this.log=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.log(n):n.map(function(n){return Math.log(n)})}),e},this.exp=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.exp(n):n.map(function(n){return Math.exp(n)})}),e},this.abs=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.abs(n):n.map(function(n){return Math.abs(n)})}),e},this.atan=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.atan(n):n.map(function(n){return Math.atan(n)})}),e},this.cos=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.cos(n):n.map(function(n){return Math.cos(n)})}),e},this.sin=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.sin(n):n.map(function(n){return Math.sin(n)})}),e},this.round=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.round(n):n.map(function(n){return Math.round(n)})}),e},this.ceil=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.ceil(n):n.map(function(n){return Math.ceil(n)})}),e},this.floor=function(){var e=f.clone();return e.map(function(n){return 1==e.dimension?Math.floor(n):n.map(function(n){return Math.floor(n)})}),e},this.pow=function(e){console.assert("number"==typeof e,"n debe ser un numero");var t=f.clone();return t.map(function(n){return 1==t.dimension?Math.pow(n,e):n.map(function(n){return Math.pow(n,e)})}),t},this.clone=function(){return l.clone(f,m)},this.size=function(){return[f.width,f.height,f.dimension]},this.max=function(){return Math.max.apply(null,f.data)},this.min=function(){return Math.min.apply(null,f.data)},this.transposed=function(){var n=c(f.height,f.width,f.dimension);return n.map(function(n,e,t){return f.getField(t,e)}),n},this.sum=function(){var n=arguments,e=f;console.assert(n.length,"Es necesario un objeto");for(var t=0,i=n.length;t<i;t++){var r=n[t];console.assert(r instanceof m||"number"==typeof r,"Debe pasar un objeto Matrix o un escalar"),e=l.sum(e,r,!0)}return e},this.subtract=function(){var n=arguments,e=f;console.assert(n.length,"Es necesario un objeto");for(var t=0,i=n.length;t<i;t++){var r=n[t];console.assert(r instanceof m||"number"==typeof r,"Debe pasar un objeto Matrix o un escalar"),e=l.sum(e,r,!1)}return e},this.getRow=function(n){console.assert("number"==typeof n&&0<=n&&n<f.height,"No es valido el numero de fila");var e=l.getIndex(0,n,f.width,f.height,f.dimension),t=(l.getIndex(f.width-1,n,f.width,f.height,f.dimension),f.data.slice(e,e+f.width*f.dimension));return new m({width:f.width,height:1,dimension:f.dimension,data:t})},this.getCol=function(n){console.assert("number"==typeof n&&0<=n&&n<f.width,"No es valido el numero de columna");for(var e=new f.typeInstance(f.height*f.dimension),t=0,i=0;t<f.height;t++,i+=f.dimension){var r=l.getIndex(n,t,f.width,f.height,f.dimension);if(1==f.dimension)e[i]=f.data[r];else for(var o=0;o<f.dimension;o++)e[i+o]=f.data[r+o]}return new m({width:1,height:f.height,dimension:f.dimension,data:e})},this.slice=function(n,e,t,i){console.assert("number"==typeof n&&0<=n&&n<f.width,"No es valido el numero de columna"),console.assert("number"==typeof e&&0<=e&&e<f.height,"No es valido el numero de filas");var r=n+(t-1),o=e+(i-1);console.assert("number"==typeof r&&0<=r&&r<f.width,"No es valido el ancho"),console.assert("number"==typeof o&&0<=o&&o<f.height,"No es valido el alto");for(var a=new f.typeInstance(t*i*f.dimension),s=0,u=e;u<=o;u++)for(var h=n;h<=r;h++){var c=l.getIndex(h,u,f.width,f.height,f.dimension);if(1==f.dimension)a[s]=f.data[c];else for(var d=0;d<f.dimension;d++)a[s+d]=f.data[c+d];s+=f.dimension}return new m({width:t,height:i,dimension:f.dimension,data:a})},this.inmultiply=function(){var n=arguments,e=f;console.assert(n.length,"Es necesario un objeto");for(var t=0,i=n.length;t<i;t++){var r=n[t];console.assert(r instanceof m||"number"==typeof r,"Debe pasar un objeto Matrix o un escalar");var o=c("number"==typeof r?e.width:r.width,e.height,e.dimension);e=l.inmultiply(o,e,r)}return e},this.inverse=function(){var n=f.det();return f.adj().transposed().inmultiply(1/n)},this.divide=function(){var n=arguments,e=f;console.assert(n.length,"Es necesario un objeto");for(var t=0,i=n.length;t<i;t++){var r=n[t];if(console.assert(r instanceof m||"number"==typeof r,"Debe pasar un objeto Matrix o un escalar"),"number"!=typeof r)try{e=e.inmultiply(r.inverse())}catch(n){e=r.inmultiply(e.inverse())}else e=e.inmultiply(1/r)}return e},this.not=function(){return f.inmultiply(-1)},this.isSingular=function(){return f.width==f.height},this.removeRow=function(i){var n=c(f.width,f.height-1,f.dimension);return n.map(function(n,e,t){return i<=t?f.getField(e,t+1):f.getField(e,t)}),n},this.removeCol=function(i){var n=c(f.width-1,f.height,f.dimension);return n.map(function(n,e,t){return i<=e?f.getField(e+1,t):f.getField(e,t)}),n},this.remove=function(o,a){var n=c(f.width-1,f.height-1,f.dimension);return n.map(function(n,e,t){var i=0,r=0;return a<=t&&(r=1),o<=e&&(i=1),f.getField(e+i,t+r)}),n},this.adj=function(){console.assert(f.isSingular(),"Debe ser una matriz cuadrada");var o=c(f.width,f.height,1),a=0;return s||(f.forEach(function(n,e,t){var i=f.remove(e,t),r=Math.pow(-1,e+t+2)*i.det();o.data[a++]=r}),s=o)},this.det=function(){if(a)return a;if(1==f.width)return a=f.data[0];if(f.width==f.height&&2==f.width)return i=f,o=r=1,console.assert(i.isSingular(),"La matriz no es cuadrada"),i.forEach(function(n,e,t){e==t&&(1==i.dimension?r*=n:r*=h(n)),e==i.width-1-t&&(1==i.dimension?o*=n:o*=h(n))}),a=r-o;for(var i,r,o,n=0,e=f.adj(),t=0;t<f.width;t++)n+=f.data[t]*e.data[t];return a=n},this.promd=function(){for(var n=0,e=0,t=f.data.length;e<t;e++)n+=f.data[e];return n},this.toString=function(){var i="";return f.forEach(function(n,e,t){1==f.dimension?i+=n+" ":i+=n.toString()+" ",e==f.width-1&&(i+="\n")}),i}}function c(n,e,t){var i={type:"float32"};return console.assert(0<arguments.length&&arguments.length<=3,"El numero de argumentos es invalido..."),1==arguments.length&&(i.width=i.height=n,i.dimension=1),2==arguments.length&&(i.width=n,i.height=e,i.dimension=1),3==arguments.length&&(i.width=n,i.height=e,i.dimension=t),new m(i)}return m.random=function(n,e,t){var i=c.apply(this,arguments);return i.map(function(n){return 1==i.dimension?Math.random():n.map(function(n){return Math.random()})}),i},m.PI=function(n,e,t){var i=c.apply(this,arguments);return i.map(function(n){return 1==i.dimension?Math.PI:n.map(function(n){return Math.PI})}),i},m.zeros=function(n,e,t){return c.apply(this,arguments)},m.ones=function(n,e,t){var i=c.apply(this,arguments);return i.map(function(n){return 1==i.dimension?1:n.map(function(n){return 1})}),i},m.eyes=function(n,e){var t={type:"float32"};console.assert(0<arguments.length&&arguments.length<=2,"El numero de argumentos es invalido..."),1==arguments.length&&(t.width=t.height=n,t.dimension=1),2==arguments.length&&(t.width=t.height=n,t.dimension=e);var i=new m(t);return i.map(function(n,e,t){return 1==i.dimension?e==t?1:0:n.map(function(n){return e==t?1:0})}),i},m});
